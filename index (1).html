<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warrior Quiz Arena - Ancient Indian Battle</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.5); }
            50% { box-shadow: 0 0 30px rgba(255, 215, 0, 0.8); }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .warrior-bg {
            background: linear-gradient(135deg, #8B4513 0%, #D2691E 50%, #CD853F 100%);
        }
        
        .ancient-pattern {
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(255, 69, 0, 0.1) 0%, transparent 50%);
        }
        
        .weapon-shadow {
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
        }
        
        .timer-ring {
            stroke-dasharray: 283;
            stroke-dashoffset: 283;
            transition: stroke-dashoffset 1s linear;
        }
    </style>
</head>
<body class="warrior-bg ancient-pattern min-h-screen">
    <!-- Login Screen -->
    <div id="loginScreen" class="min-h-screen flex items-center justify-center p-4">
        <div class="bg-gradient-to-br from-amber-100 to-orange-100 rounded-3xl shadow-2xl p-8 max-w-md w-full border-4 border-amber-600">
            <div class="text-center mb-8">
                <div class="text-6xl mb-4">‚öîÔ∏è</div>
                <h1 class="text-3xl font-bold text-amber-900 mb-2">Warrior Quiz Arena</h1>
                <p class="text-amber-700">Enter the Ancient Battle</p>
            </div>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-amber-800 font-semibold mb-2">Username</label>
                    <input type="text" id="username" class="w-full px-4 py-3 rounded-xl border-2 border-amber-300 focus:border-amber-600 focus:outline-none" placeholder="Enter username">
                </div>
                
                <div>
                    <label class="block text-amber-800 font-semibold mb-2">Password</label>
                    <input type="password" id="password" class="w-full px-4 py-3 rounded-xl border-2 border-amber-300 focus:border-amber-600 focus:outline-none" placeholder="Enter password">
                </div>
                
                <div class="flex space-x-4">
                    <button onclick="login('admin')" class="flex-1 bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-xl transition-all duration-300 transform hover:scale-105">
                        üõ°Ô∏è Admin
                    </button>
                    <button onclick="login('participant')" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-xl transition-all duration-300 transform hover:scale-105">
                        ‚öîÔ∏è Warrior
                    </button>
                </div>
            </div>
            
            <div class="mt-6 text-sm text-amber-700 bg-amber-50 p-4 rounded-xl">
                <p><strong>Admin:</strong> admin / admin123</p>
                <p><strong>Warriors:</strong> warrior1-8 / battle123</p>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="adminDashboard" class="hidden min-h-screen p-6">
        <div class="max-w-7xl mx-auto">
            <div class="bg-gradient-to-r from-red-800 to-red-600 rounded-2xl p-6 mb-6 text-white">
                <div class="flex justify-between items-center">
                    <div>
                        <h1 class="text-3xl font-bold flex items-center">
                            üõ°Ô∏è Admin Command Center
                        </h1>
                        <p class="text-red-200">Control the Ancient Battle Arena</p>
                    </div>
                    <button onclick="logout()" class="bg-red-900 hover:bg-red-800 px-4 py-2 rounded-lg transition-colors">
                        Logout
                    </button>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Question Management -->
                <div class="bg-white rounded-2xl shadow-xl p-6">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                        üìú Question Scroll
                    </h2>
                    
                    <div class="space-y-4">
                        <input type="text" id="questionText" placeholder="Enter your battle question..." class="w-full px-4 py-3 rounded-xl border-2 border-gray-300 focus:border-amber-500 focus:outline-none">
                        
                        <div class="grid grid-cols-2 gap-2">
                            <input type="text" id="optionA" placeholder="Option A" class="px-3 py-2 rounded-lg border-2 border-gray-300 focus:border-amber-500 focus:outline-none">
                            <input type="text" id="optionB" placeholder="Option B" class="px-3 py-2 rounded-lg border-2 border-gray-300 focus:border-amber-500 focus:outline-none">
                            <input type="text" id="optionC" placeholder="Option C" class="px-3 py-2 rounded-lg border-2 border-gray-300 focus:border-amber-500 focus:outline-none">
                            <input type="text" id="optionD" placeholder="Option D" class="px-3 py-2 rounded-lg border-2 border-gray-300 focus:border-amber-500 focus:outline-none">
                        </div>
                        
                        <div class="flex space-x-4">
                            <select id="correctAnswer" class="flex-1 px-3 py-2 rounded-lg border-2 border-gray-300 focus:border-amber-500 focus:outline-none">
                                <option value="">Select Correct Answer</option>
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                            </select>
                            
                            <input type="number" id="questionTimer" placeholder="Timer (sec)" min="10" max="120" value="30" class="w-24 px-3 py-2 rounded-lg border-2 border-gray-300 focus:border-amber-500 focus:outline-none">
                        </div>
                        
                        <button onclick="postQuestion()" class="w-full bg-amber-600 hover:bg-amber-700 text-white font-bold py-3 px-6 rounded-xl transition-all duration-300 transform hover:scale-105">
                            üèπ Launch Question
                        </button>
                    </div>
                </div>

                <!-- Live Stats -->
                <div class="bg-white rounded-2xl shadow-xl p-6">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                        ‚ö° Battle Statistics
                    </h2>
                    
                    <div class="space-y-4">
                        <div class="bg-green-50 p-4 rounded-xl">
                            <h3 class="font-bold text-green-800 mb-2">‚ö° Fastest Finger</h3>
                            <div id="fastestFinger" class="text-green-600">Waiting for answers...</div>
                        </div>
                        
                        <div class="bg-blue-50 p-4 rounded-xl">
                            <h3 class="font-bold text-blue-800 mb-2">üë• Active Warriors</h3>
                            <div id="activeParticipants" class="text-blue-600">0 / 8 warriors online</div>
                        </div>
                        
                        <div class="bg-purple-50 p-4 rounded-xl">
                            <h3 class="font-bold text-purple-800 mb-2">üìä Current Question</h3>
                            <div id="currentQuestionStatus" class="text-purple-600">No active question</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Admin Leaderboard -->
            <div class="mt-6 bg-white rounded-2xl shadow-xl p-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                    üèÜ Warrior Leaderboard
                </h2>
                <div id="adminLeaderboard" class="space-y-2">
                    <!-- Leaderboard will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Participant Dashboard -->
    <div id="participantDashboard" class="hidden min-h-screen p-6">
        <div class="max-w-4xl mx-auto">
            <div class="bg-gradient-to-r from-blue-800 to-blue-600 rounded-2xl p-6 mb-6 text-white">
                <div class="flex justify-between items-center">
                    <div class="flex items-center space-x-4">
                        <div id="participantAvatar" class="text-4xl"></div>
                        <div>
                            <h1 class="text-2xl font-bold" id="participantName">Warrior</h1>
                            <p class="text-blue-200">Ready for Battle</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-3xl font-bold" id="participantScore">0</div>
                        <div class="text-blue-200">Points</div>
                        <button onclick="logout()" class="mt-2 bg-blue-900 hover:bg-blue-800 px-4 py-2 rounded-lg transition-colors">
                            Logout
                        </button>
                    </div>
                </div>
            </div>

            <!-- Question Area -->
            <div id="questionArea" class="bg-white rounded-2xl shadow-xl p-8 mb-6 hidden">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">Battle Question</h2>
                    <div class="relative w-16 h-16">
                        <svg class="w-16 h-16 transform -rotate-90">
                            <circle cx="32" cy="32" r="28" stroke="#e5e7eb" stroke-width="4" fill="none"/>
                            <circle id="timerCircle" cx="32" cy="32" r="28" stroke="#f59e0b" stroke-width="4" fill="none" class="timer-ring"/>
                        </svg>
                        <div id="timerText" class="absolute inset-0 flex items-center justify-center text-xl font-bold text-amber-600">30</div>
                    </div>
                </div>
                
                <div id="questionText" class="text-xl text-gray-800 mb-6 p-4 bg-amber-50 rounded-xl border-l-4 border-amber-500">
                    Waiting for question...
                </div>
                
                <div id="optionsContainer" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Options will be populated here -->
                </div>
            </div>

            <!-- Waiting Area -->
            <div id="waitingArea" class="bg-white rounded-2xl shadow-xl p-8 text-center">
                <div class="text-6xl mb-4 animate-bounce">‚öîÔ∏è</div>
                <h2 class="text-2xl font-bold text-gray-800 mb-2">Preparing for Battle</h2>
                <p class="text-gray-600">Waiting for the next question from the battle master...</p>
            </div>

            <!-- Participant Leaderboard -->
            <div class="mt-6 bg-white rounded-2xl shadow-xl p-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                    üèÜ Warrior Rankings
                </h2>
                <div id="participantLeaderboard" class="space-y-2">
                    <!-- Leaderboard will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Game State
        let gameState = {
            currentUser: null,
            userType: null,
            participants: {},
            currentQuestion: null,
            questionTimer: null,
            questionStartTime: null,
            leaderboard: []
        };

        // Warrior Avatars
        const warriorAvatars = ['üèπ', '‚öîÔ∏è', 'üõ°Ô∏è', 'üó°Ô∏è', 'üè∫', 'üéØ', '‚ö°', 'üî•'];
        
        // Built-in credentials
        const credentials = {
            admin: { username: 'admin', password: 'admin123' },
            participants: {
                'warrior1': 'battle123', 'warrior2': 'battle123', 'warrior3': 'battle123', 'warrior4': 'battle123',
                'warrior5': 'battle123', 'warrior6': 'battle123', 'warrior7': 'battle123', 'warrior8': 'battle123'
            }
        };

        // Initialize participants
        function initializeParticipants() {
            Object.keys(credentials.participants).forEach((username, index) => {
                gameState.participants[username] = {
                    name: username,
                    avatar: warriorAvatars[index],
                    score: 0,
                    online: false,
                    lastAnswerTime: null
                };
            });
            updateLeaderboard();
        }

        // Login function
        function login(type) {
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value.trim();

            if (!username || !password) {
                alert('Please enter both username and password!');
                return;
            }

            let isValid = false;
            
            if (type === 'admin') {
                isValid = username === credentials.admin.username && password === credentials.admin.password;
            } else {
                isValid = credentials.participants[username] === password;
            }

            if (isValid) {
                gameState.currentUser = username;
                gameState.userType = type;
                
                if (type === 'participant') {
                    gameState.participants[username].online = true;
                    document.getElementById('participantName').textContent = username;
                    document.getElementById('participantAvatar').textContent = gameState.participants[username].avatar;
                    document.getElementById('participantScore').textContent = gameState.participants[username].score;
                }
                
                showDashboard(type);
                updateActiveParticipants();
                updateLeaderboard();
            } else {
                alert('Invalid credentials! Please check the login guide.');
            }
        }

        // Show appropriate dashboard
        function showDashboard(type) {
            document.getElementById('loginScreen').classList.add('hidden');
            
            if (type === 'admin') {
                document.getElementById('adminDashboard').classList.remove('hidden');
            } else {
                document.getElementById('participantDashboard').classList.remove('hidden');
            }
        }

        // Logout function
        function logout() {
            if (gameState.userType === 'participant' && gameState.currentUser) {
                gameState.participants[gameState.currentUser].online = false;
            }
            
            gameState.currentUser = null;
            gameState.userType = null;
            
            document.getElementById('adminDashboard').classList.add('hidden');
            document.getElementById('participantDashboard').classList.add('hidden');
            document.getElementById('loginScreen').classList.remove('hidden');
            
            // Clear form
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            
            updateActiveParticipants();
        }

        // Post question (Admin)
        function postQuestion() {
            const questionText = document.getElementById('questionText').value.trim();
            const optionA = document.getElementById('optionA').value.trim();
            const optionB = document.getElementById('optionB').value.trim();
            const optionC = document.getElementById('optionC').value.trim();
            const optionD = document.getElementById('optionD').value.trim();
            const correctAnswer = document.getElementById('correctAnswer').value;
            const timer = parseInt(document.getElementById('questionTimer').value) || 30;

            if (!questionText || !optionA || !optionB || !optionC || !optionD || !correctAnswer) {
                alert('Please fill in all fields!');
                return;
            }

            gameState.currentQuestion = {
                text: questionText,
                options: { A: optionA, B: optionB, C: optionC, D: optionD },
                correct: correctAnswer,
                timer: timer,
                answers: {},
                startTime: Date.now()
            };

            gameState.questionStartTime = Date.now();
            
            // Clear form
            document.getElementById('questionText').value = '';
            document.getElementById('optionA').value = '';
            document.getElementById('optionB').value = '';
            document.getElementById('optionC').value = '';
            document.getElementById('optionD').value = '';
            document.getElementById('correctAnswer').value = '';
            
            displayQuestionToParticipants();
            updateCurrentQuestionStatus();
            
            // Start timer
            startQuestionTimer(timer);
        }

        // Display question to participants
        function displayQuestionToParticipants() {
            if (gameState.userType === 'participant') {
                document.getElementById('waitingArea').classList.add('hidden');
                document.getElementById('questionArea').classList.remove('hidden');
                
                document.getElementById('questionText').textContent = gameState.currentQuestion.text;
                
                const optionsContainer = document.getElementById('optionsContainer');
                optionsContainer.innerHTML = '';
                
                Object.entries(gameState.currentQuestion.options).forEach(([key, value]) => {
                    const button = document.createElement('button');
                    button.className = 'bg-gradient-to-r from-amber-400 to-amber-600 hover:from-amber-500 hover:to-amber-700 text-white font-bold py-4 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 text-left';
                    button.innerHTML = `<span class="text-xl font-bold">${key}.</span> ${value}`;
                    button.onclick = () => submitAnswer(key);
                    optionsContainer.appendChild(button);
                });
            }
        }

        // Submit answer
        function submitAnswer(answer) {
            if (!gameState.currentQuestion || gameState.currentQuestion.answers[gameState.currentUser]) {
                return;
            }

            const answerTime = Date.now();
            const timeTaken = answerTime - gameState.questionStartTime;
            
            gameState.currentQuestion.answers[gameState.currentUser] = {
                answer: answer,
                time: timeTaken,
                timestamp: answerTime
            };

            // Calculate points (correct answer + speed bonus)
            let points = 0;
            if (answer === gameState.currentQuestion.correct) {
                points = 100;
                const speedBonus = Math.max(0, 50 - Math.floor(timeTaken / 1000));
                points += speedBonus;
            }

            gameState.participants[gameState.currentUser].score += points;
            gameState.participants[gameState.currentUser].lastAnswerTime = timeTaken;

            // Update participant score display
            document.getElementById('participantScore').textContent = gameState.participants[gameState.currentUser].score;

            // Disable options
            const buttons = document.querySelectorAll('#optionsContainer button');
            buttons.forEach(btn => {
                btn.disabled = true;
                btn.classList.add('opacity-50', 'cursor-not-allowed');
            });

            // Highlight correct answer
            buttons.forEach((btn, index) => {
                const optionKey = ['A', 'B', 'C', 'D'][index];
                if (optionKey === gameState.currentQuestion.correct) {
                    btn.classList.remove('from-amber-400', 'to-amber-600');
                    btn.classList.add('from-green-400', 'to-green-600');
                } else if (optionKey === answer && answer !== gameState.currentQuestion.correct) {
                    btn.classList.remove('from-amber-400', 'to-amber-600');
                    btn.classList.add('from-red-400', 'to-red-600');
                }
            });

            updateFastestFinger();
            updateLeaderboard();
        }

        // Start question timer
        function startQuestionTimer(duration) {
            let timeLeft = duration;
            const timerCircle = document.getElementById('timerCircle');
            const timerText = document.getElementById('timerText');
            
            if (timerText) timerText.textContent = timeLeft;
            
            gameState.questionTimer = setInterval(() => {
                timeLeft--;
                
                if (timerText) timerText.textContent = timeLeft;
                
                if (timerCircle) {
                    const progress = (duration - timeLeft) / duration;
                    const offset = 283 - (progress * 283);
                    timerCircle.style.strokeDashoffset = offset;
                }
                
                if (timeLeft <= 0) {
                    clearInterval(gameState.questionTimer);
                    endQuestion();
                }
            }, 1000);
        }

        // End question
        function endQuestion() {
            gameState.currentQuestion = null;
            
            if (gameState.userType === 'participant') {
                document.getElementById('questionArea').classList.add('hidden');
                document.getElementById('waitingArea').classList.remove('hidden');
            }
            
            updateCurrentQuestionStatus();
            updateFastestFinger();
            updateLeaderboard();
        }

        // Update fastest finger
        function updateFastestFinger() {
            if (!gameState.currentQuestion || Object.keys(gameState.currentQuestion.answers).length === 0) {
                document.getElementById('fastestFinger').textContent = 'Waiting for answers...';
                return;
            }

            let fastest = null;
            let fastestTime = Infinity;

            Object.entries(gameState.currentQuestion.answers).forEach(([user, data]) => {
                if (data.answer === gameState.currentQuestion.correct && data.time < fastestTime) {
                    fastest = user;
                    fastestTime = data.time;
                }
            });

            const fastestElement = document.getElementById('fastestFinger');
            if (fastest) {
                const avatar = gameState.participants[fastest].avatar;
                fastestElement.innerHTML = `${avatar} ${fastest} (${(fastestTime / 1000).toFixed(1)}s)`;
            } else {
                fastestElement.textContent = 'No correct answers yet...';
            }
        }

        // Update active participants
        function updateActiveParticipants() {
            const count = Object.values(gameState.participants).filter(p => p.online).length;
            const element = document.getElementById('activeParticipants');
            if (element) {
                element.textContent = `${count} / 8 warriors online`;
            }
        }

        // Update current question status
        function updateCurrentQuestionStatus() {
            const element = document.getElementById('currentQuestionStatus');
            if (element) {
                if (gameState.currentQuestion) {
                    const answeredCount = Object.keys(gameState.currentQuestion.answers).length;
                    element.textContent = `Active - ${answeredCount} warriors answered`;
                } else {
                    element.textContent = 'No active question';
                }
            }
        }

        // Update leaderboard
        function updateLeaderboard() {
            const sortedParticipants = Object.values(gameState.participants)
                .sort((a, b) => b.score - a.score);

            // Update admin leaderboard
            const adminBoard = document.getElementById('adminLeaderboard');
            if (adminBoard) {
                adminBoard.innerHTML = sortedParticipants.map((participant, index) => {
                    const medal = index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : 'üèÖ';
                    const statusColor = participant.online ? 'text-green-600' : 'text-gray-400';
                    const status = participant.online ? 'Online' : 'Offline';
                    
                    return `
                        <div class="flex items-center justify-between p-4 bg-gradient-to-r from-amber-50 to-orange-50 rounded-xl border border-amber-200">
                            <div class="flex items-center space-x-4">
                                <span class="text-2xl">${medal}</span>
                                <span class="text-2xl">${participant.avatar}</span>
                                <div>
                                    <div class="font-bold text-gray-800">${participant.name}</div>
                                    <div class="text-sm ${statusColor}">${status}</div>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-2xl font-bold text-amber-600">${participant.score}</div>
                                <div class="text-sm text-gray-600">points</div>
                            </div>
                        </div>
                    `;
                }).join('');
            }

            // Update participant leaderboard
            const participantBoard = document.getElementById('participantLeaderboard');
            if (participantBoard) {
                participantBoard.innerHTML = sortedParticipants.map((participant, index) => {
                    const medal = index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : 'üèÖ';
                    const isCurrentUser = participant.name === gameState.currentUser;
                    const highlightClass = isCurrentUser ? 'ring-2 ring-blue-500 bg-blue-50' : 'bg-gray-50';
                    
                    return `
                        <div class="flex items-center justify-between p-4 ${highlightClass} rounded-xl border border-gray-200">
                            <div class="flex items-center space-x-4">
                                <span class="text-2xl">${medal}</span>
                                <span class="text-2xl">${participant.avatar}</span>
                                <div>
                                    <div class="font-bold text-gray-800">${participant.name} ${isCurrentUser ? '(You)' : ''}</div>
                                    <div class="text-sm text-gray-600">Rank #${index + 1}</div>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-2xl font-bold text-amber-600">${participant.score}</div>
                                <div class="text-sm text-gray-600">points</div>
                            </div>
                        </div>
                    `;
                }).join('');
            }
        }

        // Initialize the game
        initializeParticipants();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'987938bb05a73a5d',t:'MTc1OTI5Mjk5NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>

